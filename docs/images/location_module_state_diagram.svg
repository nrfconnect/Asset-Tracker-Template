<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Location Module UML State Diagram -->
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
		width="760" height="460" viewBox="0 0 760 460">

	<defs>
		<!-- Arrow marker -->
		<g id="lend4">
			<path d="M 2 1 L 0 0 L 2 -1 L 2 1" style="stroke:none"/>
		</g>
		<marker id="mrkr4" style="fill:#000000;stroke:#000000;stroke-width:0.28" refX="-7.04" orient="auto" markerUnits="strokeWidth" overflow="visible">
			<use xlink:href="#lend4" transform="scale(-3.52,-3.52)"/>
		</marker>
	</defs>

	<style type="text/css">
	<![CDATA[
		.st1 {fill:#ffffff;stroke:#000000;stroke-width:1}
		.st3 {marker-end:url(#mrkr4);stroke:#000000;stroke-linecap:butt;stroke-width:1}
		.st4 {fill:none;stroke:none;stroke-width:0.75}
		.st5 {fill:#000000;font-family:Arial;font-size:0.833336em}
		.st6 {fill:#000000;font-family:Arial;font-size:0.666664em}
		.st8 {fill:#000000;stroke:#000000;stroke-width:1}
	]]>
	</style>

	<!-- Initial state (black filled circle) -->
	<circle cx="350" cy="20" r="6" class="st8"/>

	<!-- Transition: Initial -> STATE_WAITING_FOR_MODEM_INIT -->
	<path d="M350,26 L350,50" class="st3"/>

	<!-- STATE_WAITING_FOR_MODEM_INIT -->
	<g id="state-waiting-for-modem-init" transform="translate(130, 50)">
		<rect x="0" y="0" width="440" height="30" rx="6" ry="6" class="st1"/>
		<text x="220" y="20" text-anchor="middle" class="st5">STATE_WAITING_FOR_MODEM_INIT</text>
	</g>

	<!-- Transition: STATE_WAITING_FOR_MODEM_INIT -> STATE_RUNNING -->
	<path d="M350,80 L350,115" class="st3"/>
	<text x="360" y="100" class="st6">LOCATION_PRIV_MODEM_INITIALIZED</text>

	<!-- STATE_RUNNING (composite state) -->
	<g id="state-running" transform="translate(30, 115)">
		<!-- Outer composite state box -->
		<rect x="0" y="0" width="700" height="320" rx="8" ry="8" class="st1"/>

		<!-- Header box -->
		<rect x="0" y="0" width="700" height="24" rx="8" ry="8" class="st1"/>
		<text x="10" y="17" class="st5">STATE_RUNNING</text>

		<!-- Entry action -->
		<text x="10" y="40" class="st6">entry / location_init()</text>

		<!-- Initial state inside RUNNING (black filled circle) -->
		<circle cx="320" cy="70" r="5" class="st8"/>

		<!-- Transition: Initial -> STATE_LOCATION_SEARCH_INACTIVE -->
		<path d="M320,75 L320,100" class="st3"/>

		<!-- STATE_LOCATION_SEARCH_INACTIVE -->
		<g id="state-inactive" transform="translate(50, 100)">
			<rect x="0" y="0" width="540" height="30" rx="6" ry="6" class="st1"/>
			<text x="270" y="20" text-anchor="middle" class="st5">STATE_LOCATION_SEARCH_INACTIVE</text>
		</g>

		<!-- Transition: INACTIVE -> ACTIVE (right side, going down) -->
		<path d="M480,130 L480,185" class="st3"/>
		<text x="490" y="160" class="st6">LOCATION_SEARCH_TRIGGER</text>

		<!-- STATE_LOCATION_SEARCH_ACTIVE -->
		<g id="state-active" transform="translate(50, 185)">
			<!-- Main state box -->
			<rect x="0" y="0" width="540" height="100" rx="6" ry="6" class="st1"/>

			<!-- Header box -->
			<rect x="0" y="0" width="540" height="24" rx="6" ry="6" class="st1"/>
			<text x="10" y="17" class="st5">STATE_LOCATION_SEARCH_ACTIVE</text>

			<!-- Entry action -->
			<text x="10" y="45" class="st6">entry / location_request()</text>

			<!-- Internal transitions -->
			<text x="10" y="65" class="st6">LOCATION_SEARCH_CANCEL / location_request_cancel()</text>
		</g>

		<!-- Transition: ACTIVE -> INACTIVE (left side, going up) -->
		<path d="M160,185 L160,130" class="st3"/>
		<text x="15" y="160" class="st6">LOCATION_SEARCH_DONE</text>

	</g>

</svg>
