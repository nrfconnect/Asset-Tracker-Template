@startuml
state STATE_RUNNING

[*] --> STATE_RUNNING

STATE_RUNNING --> STATE_DISCONNECTED: NETWORK_DISCONNECTED

state STATE_RUNNING {
    state STATE_DISCONNECTED
    state STATE_CONNECTING
    state STATE_CONNECTED

    [*] --> STATE_DISCONNECTED

    STATE_DISCONNECTED --> STATE_CONNECTING: NETWORK_CONNECTED

    state STATE_CONNECTING {
        state STATE_CONNECTING_ATTEMPT
        state STATE_CONNECTING_BACKOFF

        [*] --> STATE_CONNECTING_ATTEMPT

        STATE_CONNECTING_ATTEMPT --> STATE_CONNECTED: Successful connection
        STATE_CONNECTING_ATTEMPT --> STATE_CONNECTING_BACKOFF: Connection failed

        STATE_CONNECTING_BACKOFF --> STATE_CONNECTING_ATTEMPT: CLOUD_BACKOFF_EXPIRED
    }

    state STATE_CONNECTED {
        state STATE_CONNECTED_READY
        state STATE_CONNECTED_PAUSED

        [*] --> STATE_CONNECTED_READY

        STATE_CONNECTED_READY --> STATE_CONNECTED_PAUSED: NETWORK_DISCONNECTED
        STATE_CONNECTED_PAUSED --> STATE_CONNECTED_READY: NETWORK_CONNECTED
    }
}
@enduml
