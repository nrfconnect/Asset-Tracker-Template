; Device Shadow Object Definition
; --------------------------------
; This unified structure defines both "desired" (cloud-to-device) and "reported" (device-to-cloud)
; objects in the device shadow. All sections are optional, but if present, they must appear in
; the specified order when decoding the CBOR buffer.
;
; Sections:
; 1. "config": Device configuration parameters.
;    - "update_interval": (optional) A 4-byte unsigned integer (in seconds) specifying:
;                         - In passthrough mode: How often the device samples sensors and sends data to cloud.
;                         - In buffer mode: How often the device sends buffered data to cloud, polls shadow, and checks for FOTA updates.
;                         Valid range: 1 to 4294967295. Values outside this range are decoded but rejected by application.
;    - "sample_interval": (optional) A 4-byte unsigned integer (in seconds) specifying how often the device
;                         samples sensor data in buffer mode. This parameter is ignored in passthrough mode.
;                         Valid range: 1 to 4294967295. Values outside this range are decoded but rejected by application.
;    - "buffer_mode": (optional) A boolean value that controls the storage mode.
;                     true = Buffer mode: Device samples at "sample_interval" and sends data at "update_interval".
;                     false = Passthrough mode: Device samples and sends data at "update_interval" (sample_interval is ignored).
;                     When not present, the device uses the default passthrough mode.
;    - Additional configuration parameters may be included as key-value pairs (tstr => any).
;
; 2. "command": (optional) An array specifying a command for the device to execute.
;    - Structure: [type, id]
;      - type: 4-byte unsigned integer indicating the command type.
;              Supported command types:
;                1 = PROVISION: Triggers device provisioning sequence
;              Valid range: 1 to 1.
;      - id:   4-byte unsigned integer indicating the command ID.
;              Used to track command execution. Increment for successive commands.
;              Valid range: 1 to 4294967295 (excludes 0).
;
; Any additional fields may be included as key-value pairs (tstr => any).

shadow-object = {
    ? "config": {
        ? "update_interval": uint .size 4,
        ? "sample_interval": uint .size 4,
        ? "buffer_mode": bool,
        ? "storage_threshold": uint .size 4,
        * tstr => any
    },
    ? "command": [type: uint .size 4 .ge 1 .le 1, id: uint .size 4 .ge 1 .le 4294967295],
    * tstr => any
}
